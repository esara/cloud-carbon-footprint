"use strict";(self.webpackChunkwww_cloudcarbonfootprint_org=self.webpackChunkwww_cloudcarbonfootprint_org||[]).push([[734],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},g="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),g=c(n),d=r,f=g["".concat(l,".").concat(d)]||g[d]||u[d]||o;return n?a.createElement(f,i(i({ref:t},p),{},{components:n})):a.createElement(f,i({ref:t},p))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[g]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9760:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const o={id:"tagging",title:"Tagging",slug:"/tagging",sidebar_position:3},i=void 0,s={unversionedId:"ConfigurationOptions/tagging",id:"ConfigurationOptions/tagging",title:"Tagging",description:"Sometimes it may be necessary to organize your data in ways that will allow for better breakdown and visibility across specific organizations, teams, applications, or shared resources. Cloud providers allow for this organization through tagging of resources, both custom tags and CSP assigned tags in key/value pairs.",source:"@site/docs/ConfigurationOptions/Tagging.md",sourceDirName:"ConfigurationOptions",slug:"/tagging",permalink:"/docs/tagging",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{id:"tagging",title:"Tagging",slug:"/tagging",sidebar_position:3},sidebar:"defaultSidebar",previous:{title:"Performance Considerations",permalink:"/docs/performance-considerations"},next:{title:"Configurations Glossary",permalink:"/docs/configurations-glossary"}},l={},c=[{value:"AWS Tagging Conventions",id:"aws-tagging-conventions",level:3},{value:"Azure Tagging Conventions",id:"azure-tagging-conventions",level:3},{value:"Filtering Estimates by Tags via API",id:"filtering-estimates-by-tags-via-api",level:2}],p={toc:c},g="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(g,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Sometimes it may be necessary to organize your data in ways that will allow for better breakdown and visibility across specific organizations, teams, applications, or shared resources. Cloud providers allow for this organization through tagging of resources, both custom tags and CSP assigned tags in key/value pairs. "),(0,r.kt)("p",null,"CCF supports the capturing of these tags as part of resource metadata and filtering of cached results via an API parameter. Currently tagging support is limited to AWS and those using MongoDB, and filtering data based on tag is only possible when directly querying the API."),(0,r.kt)("p",null,"By including resource tags in the data retrieved from cloud providers and then filtering to estimate energy and carbon only for specific tags, you can get a better sense of carbon as it relates to your business contexts, org structure, applications, etc. With this information, you can potentially better target areas to focus and optimize."),(0,r.kt)("p",null,"Tags can be specified by providing a list of tag names to the appropriate config variable within the ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," file of your API or CLI package."),(0,r.kt)("p",null,"Example: Specifying ",(0,r.kt)("inlineCode",{parentName:"p"},'AWS_RESOURCE_TAG_NAMES=["user:Environment", \u201caws:createdBy\u201d]')," in your API or CLI ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," file will include the corresponding tag values for each AWS resource in the results:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-JSON"},'{\n "cloudProvider": "AWS",\n "kilowattHours": 9.17,\n "co2e": 2.064,\n "usesAverageCPUConstant": true,\n "serviceName": "AWSLambda",\n "accountId": "1234567890",\n "accountName": "example-account",\n "region": "eu-west-2",\n "cost": 0.0000238,\n "tags": {\n   "user:Environment": "production",\n   \u201cuser:Production\u201d: \u201cIAMUser:example-user\u201d,\n }\n}\n')),(0,r.kt)("h3",{id:"aws-tagging-conventions"},"AWS Tagging Conventions"),(0,r.kt)("p",null,"The AWS Cost and Usage Reporting (CUR) translates tag names to names that are valid Athena column names. On top of this, it also adds a prefix to distinguish between user-created tags and AWS-internal tags. While not documented, we have found that a tag such as SourceRepository will be ",(0,r.kt)("inlineCode",{parentName:"p"},"user:SourceRepository")," in CUR, and ",(0,r.kt)("inlineCode",{parentName:"p"},"resource_tags_user_source_repository")," in Athena (AWS-internal tags will be prefixed with ",(0,r.kt)("inlineCode",{parentName:"p"},"aws:")," instead of ",(0,r.kt)("inlineCode",{parentName:"p"},"user:")," in CUR).\nTo include a list of resource tags for AWS, you must set the ",(0,r.kt)("inlineCode",{parentName:"p"},"AWS_RESOURCE_TAG_NAMES")," with the appropriate prefixes included."),(0,r.kt)("p",null,"Example:\n",(0,r.kt)("inlineCode",{parentName:"p"},'AWS_RESOURCE_TAG_NAMES=["user:Environment", "aws:CreatedBy"]')),(0,r.kt)("p",null,"For more information on AWS tags, you can refer to the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/general/latest/gr/aws_tagging.html"},"official AWS tagging documentation"),"."),(0,r.kt)("h3",{id:"azure-tagging-conventions"},"Azure Tagging Conventions"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/rest/api/consumption/"},"Azure Consumption API")," exposes a resource's ",(0,r.kt)("inlineCode",{parentName:"p"},"tag")," property as a field in each row of billing data. This field allows for access to the ",(0,r.kt)("inlineCode",{parentName:"p"},"resourceGroup")," property as well.\nBoth of these properties can be accessed as tagging configs within CCF. To include a list of resource tags for Azure, you must set the ",(0,r.kt)("inlineCode",{parentName:"p"},"Azure_Resource_Tag_Names"),"."),(0,r.kt)("p",null,"Example: ",(0,r.kt)("inlineCode",{parentName:"p"},'AZURE_RESOURCE_TAG_NAMES=["resourceGroup", "project", "customer"]')),(0,r.kt)("p",null,"For more information on Azure tags, you can refer to the ",(0,r.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/rest/api/consumption/tags/get?source=recommendations&tabs=HTTP"},"official Azure Consumption tags documentation"),"."),(0,r.kt)("h2",{id:"filtering-estimates-by-tags-via-api"},"Filtering Estimates by Tags via API"),(0,r.kt)("p",null,"Once tags have been included in the data cached in MongoDB, you can filter the data retrieved from the API by specifying the desired tag via API parameter. For more details, please visit the ",(0,r.kt)("a",{parentName:"p",href:"/docs/data-persistence-and-caching/#filtering-estimates"},"Filtering Estimates")," section of the ",(0,r.kt)("a",{parentName:"p",href:"/docs/data-persistence-and-caching"},"Data Persistence and Caching")," page."))}u.isMDXComponent=!0}}]);